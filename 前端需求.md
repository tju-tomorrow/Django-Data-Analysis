# 完整的改进后架构

```
┌─────────────────────────────────────────────────────────┐
│                      前端（React）                        │
│  - Markdown 渲染                                         │
│  - 图表可视化（Recharts）                                │
│  - 流式响应显示                                          │
└─────────────────┬───────────────────────────────────────┘
                  │
                  │ HTTP Requests
                  │
┌─────────────────▼───────────────────────────────────────┐
│              Django Backend (API)                        │
│  ┌─────────────────────────────────────────────────┐   │
│  │  ConversationManager                             │   │
│  │  - 上下文管理                                    │   │
│  │  - Token 控制                                    │   │
│  │  - 意图识别                                      │   │
│  └─────────────────┬───────────────────────────────┘   │
│                    │                                     │
│  ┌─────────────────▼───────────────────────────────┐   │
│  │  LogAnalysisAgent                                │   │
│  │  - 任务规划                                      │   │
│  │  - 工具调用                                      │   │
│  │  - 结果整合                                      │   │
│  └─────────────────┬───────────────────────────────┘   │
│                    │                                     │
│  ┌─────────────────▼───────────────────────────────┐   │
│  │  EnhancedRAG                                     │   │
│  │  - 混合检索（Vector + BM25）                    │   │
│  │  - 查询改写                                      │   │
│  │  - 重排序                                        │   │
│  └─────────────────┬───────────────────────────────┘   │
│                    │                                     │
│  ┌─────────────────▼───────────────────────────────┐   │
│  │  PromptTemplates                                 │   │
│  │  - 角色定义                                      │   │
│  │  - 任务模板                                      │   │
│  │  - Few-shot 示例                                 │   │
│  └─────────────────┬───────────────────────────────┘   │
└────────────────────┼───────────────────────────────────┘
                     │
                     │
┌────────────────────▼───────────────────────────────────┐
│              DeepSeek-R1 (Ollama)                       │
└─────────────────────────────────────────────────────────┘
```

------

# Feature


## 1.会员展示

![image-20251023191618153](https://raw.githubusercontent.com/tju-tomorrow/Image/main/img/image-20251023191618153.png)

------